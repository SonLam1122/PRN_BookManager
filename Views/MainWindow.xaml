<Window x:Class="BookManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Book Store Management" Height="800" Width="1200"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0" Text="Book Store Management System" 
                   FontSize="24" FontWeight="Bold" 
                   HorizontalAlignment="Center" Margin="10"/>

        <!-- Search and Filter Panel -->
        <Border Grid.Row="1" Background="LightGray" Padding="10" Margin="5">
            <StackPanel>
                <!-- Search -->
                <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                    <TextBlock Text="Search:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <TextBox Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}" 
                             Width="200" Margin="0,0,10,0"/>
                    <Button Content="Search" Command="{Binding SearchCommand}" 
                            Padding="10,5" Margin="0,0,10,0"/>
                    <Button Content="Clear" Command="{Binding ClearFiltersCommand}" 
                            Padding="10,5"/>
                </StackPanel>

                <!-- Filters -->
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Filter by Category:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <ComboBox ItemsSource="{Binding Categories}" 
                              SelectedValue="{Binding SelectedCategoryFilter}"
                              SelectedValuePath="CategoryId"
                              DisplayMemberPath="CategoryName"
                              Width="150" Margin="0,0,10,0"/>
                    <Button Content="Filter" Command="{Binding FilterByCategoryCommand}" 
                            Padding="10,5" Margin="0,0,20,0"/>

                    <TextBlock Text="Filter by Author:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                    <ComboBox ItemsSource="{Binding Authors}" 
                              SelectedValue="{Binding SelectedAuthorFilter}"
                              SelectedValuePath="AuthorId"
                              DisplayMemberPath="FullName"
                              Width="150" Margin="0,0,10,0"/>
                    <Button Content="Filter" Command="{Binding FilterByAuthorCommand}" 
                            Padding="10,5"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="2" Margin="5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- Books List -->
            <GroupBox Grid.Column="0" Header="Books" Margin="0,0,5,0">
                <DataGrid ItemsSource="{Binding Books}" 
                          SelectedItem="{Binding SelectedBook}"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding BookId}" Width="50"/>
                        <DataGridTextColumn Header="Title" Binding="{Binding Title}" Width="*"/>
                        <DataGridTextColumn Header="ISBN" Binding="{Binding ISBN}" Width="120"/>
                        <DataGridTextColumn Header="Year" Binding="{Binding PublishYear}" Width="60"/>
                        <DataGridTextColumn Header="Pages" Binding="{Binding Pages}" Width="60"/>
                        <DataGridTextColumn Header="Price" Binding="{Binding Price, StringFormat=C}" Width="80"/>
                        <DataGridTextColumn Header="Stock" Binding="{Binding StockQuantity}" Width="60"/>
                    </DataGrid.Columns>
                </DataGrid>
            </GroupBox>

            <!-- Book Details -->
            <GroupBox Grid.Column="1" Header="Book Details" Margin="5,0,0,0">
                <ScrollViewer>
                    <StackPanel Margin="10" DataContext="{Binding SelectedBook}">
                        <TextBlock Text="Title:" FontWeight="Bold"/>
                        <TextBox Text="{Binding Title, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>

                        <TextBlock Text="ISBN:" FontWeight="Bold"/>
                        <TextBox Text="{Binding ISBN, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>

                        <TextBlock Text="Category ID:" FontWeight="Bold"/>
                        <TextBox Text="{Binding CategoryId, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>

                        <TextBlock Text="Author ID:" FontWeight="Bold"/>
                        <TextBox Text="{Binding AuthorId, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>

                        <TextBlock Text="Publish Year:" FontWeight="Bold"/>
                        <TextBox Text="{Binding PublishYear, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>

                        <TextBlock Text="Pages:" FontWeight="Bold"/>
                        <TextBox Text="{Binding Pages, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>

                        <TextBlock Text="Price:" FontWeight="Bold"/>
                        <TextBox Text="{Binding Price, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>

                        <TextBlock Text="Stock Quantity:" FontWeight="Bold"/>
                        <TextBox Text="{Binding StockQuantity, UpdateSourceTrigger=PropertyChanged}" Margin="0,0,0,10"/>

                        <TextBlock Text="Description:" FontWeight="Bold"/>
                        <TextBox Text="{Binding Description, UpdateSourceTrigger=PropertyChanged}" 
                                 TextWrapping="Wrap" Height="80" Margin="0,0,0,10"/>
                    </StackPanel>
                </ScrollViewer>
            </GroupBox>
        </Grid>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" 
                    HorizontalAlignment="Center" Margin="10">
            <Button Content="Add Book" Command="{Binding AddBookCommand}" 
                    Padding="15,8" Margin="5" MinWidth="100"/>
            <Button Content="Update Book" Command="{Binding UpdateBookCommand}" 
                    Padding="15,8" Margin="5" MinWidth="100"/>
            <Button Content="Delete Book" Command="{Binding DeleteBookCommand}" 
                    Padding="15,8" Margin="5" MinWidth="100"/>
            <Button Content="Refresh" Command="{Binding LoadDataCommand}" 
                    Padding="15,8" Margin="5" MinWidth="100"/>
        </StackPanel>
    </Grid>
</Window>
